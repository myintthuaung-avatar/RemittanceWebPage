var G=Object.defineProperty;var L=(l,e,n)=>e in l?G(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n;var p=(l,e,n)=>(L(l,typeof e!="symbol"?e+"":e,n),n);import{c as y,_ as x,f as E,G as I,k as a,j as t,H as T,I as B,u as r,E as M,B as S,q as f,C as g,s as w,D as N,x as _,V as s,l as h,p as u,z as C,A as R,J as z,e as A,ay as P,af as V,ad as H,ak as O,b2 as K}from"./index-26f63e57.js";import{D as b,V as k}from"./VAutocomplete-50ca3122.js";import{D as j}from"./DataTableHelper-234fa2d4.js";import"./VCheckboxBtn-5a600a8b.js";class D{constructor(){p(this,"id",0);p(this,"account_no","");p(this,"description","");p(this,"company_id",null);p(this,"department_id",null);p(this,"description_name","");p(this,"company_name","")}}class q{SaveOrUpdate(e){return y.$http.post("/Account/SaveOrUpdate",e)}GetAll(e,n){let m={params:{...e,...n}};return y.$http.get("Account/GetAll",m)}GetById(e){return y.$http.get("/Account/GetById?id="+e)}Delete(e){return y.$http.delete("Account/Delete?id="+e)}}const v=new q;const J={data(){return{formname:"",dialog:!1,model:new D,companylist:[],departmentlist:[],companyrule:[l=>!!l||"Please Select Company !"],departmentrule:[l=>!!l||"Please Select Department !"],accountrule:[l=>!!l||"Please Fill Account No !"],descriptionrule:[l=>!!l||"Please Fill Description !"]}},watch:{"model.company_id"(l){this.departmentlist=[],l!=null&&b.GetDepartmentList(l).then(e=>{this.departmentlist=e.data})}},methods:{Show(l){this.dialog=!0,l=="new"?this.formname="Account Entry":this.formname="Edit Account Entry"},ValidateModel(){return this.$refs.form.validate()},onCompanyChange(){this.model.department_id=null},SaveOrUpdate(){var l=this;l.ValidateModel(),l.valid==!0&&v.SaveOrUpdate(l.model).then(e=>{if(e.data){var n=e.data.messages[0];e.data.success?(l.$root.AlertDialog.Show({message:n,color:"success"}),l.$emit("AfterSaved"),l.ClearData()):l.$root.AlertDialog.Show({message:n,color:"error"})}})},ClearData(){this.model.account_no="",this.model.description="",this.model.company_id=null,this.model.department_id=null,this.dialog=!1},ClearCancel(){this.model.account_no="",this.model.description="",this.model.company_id=null,this.model.department_id=null}},created(){b.GetCompanyList().then(l=>{this.companylist=l.data})}};function Q(l,e,n,m,o,i){return E(),I(z,{persistent:"",modelValue:o.dialog,"onUpdate:modelValue":e[8]||(e[8]=d=>o.dialog=d),width:"50%"},{default:a(()=>[t(_,null,{default:a(()=>[t(T,{dark:"",color:"rgb(0 208 250)"},{default:a(()=>[t(B,{dark:""},{default:a(()=>[r(M(o.formname),1)]),_:1}),t(S),t(f,{onClick:e[0]||(e[0]=g(d=>i.ClearData(),["stop"])),icon:""},{default:a(()=>[t(w,null,{default:a(()=>e[9]||(e[9]=[r("mdi-close")])),_:1})]),_:1})]),_:1}),t(N,{onSubmit:g(i.SaveOrUpdate,["prevent"]),autocomplete:"off",ref:"form",modelValue:l.valid,"onUpdate:modelValue":e[7]||(e[7]=d=>l.valid=d)},{default:a(()=>[t(_,{flat:""},{default:a(()=>[t(s,{cols:"12",md:"12",class:"mt-8"},{default:a(()=>[t(h,{dense:""},{default:a(()=>[t(s,{cols:"12",md:"12"},{default:a(()=>[t(h,{dense:""},{default:a(()=>[t(s,{cols:"12",md:"4"},{default:a(()=>e[10]||(e[10]=[u("label",{class:"font-weight-regular"},[r("Account No"),u("span",{class:"text-red"},"*")],-1)])),_:1}),t(s,{cols:"12",md:"5"},{default:a(()=>[t(C,{modelValue:o.model.account_no,"onUpdate:modelValue":e[1]||(e[1]=d=>o.model.account_no=d),variant:"outlined",density:"compact",rules:o.accountrule},null,8,["modelValue","rules"])]),_:1}),t(s,{cols:"12",md:"4"},{default:a(()=>e[11]||(e[11]=[u("label",{class:"font-weight-regular"},[r("Description"),u("span",{class:"text-red"},"*")],-1)])),_:1}),t(s,{cols:"12",md:"5"},{default:a(()=>[t(C,{modelValue:o.model.description,"onUpdate:modelValue":e[2]||(e[2]=d=>o.model.description=d),variant:"outlined",density:"compact",rules:o.descriptionrule},null,8,["modelValue","rules"])]),_:1}),t(s,{cols:"12",md:"4"},{default:a(()=>e[12]||(e[12]=[u("label",{class:"font-weight-regular"},[r("Company"),u("span",{class:"text-red"},"*")],-1)])),_:1}),t(s,{cols:"12",md:"5"},{default:a(()=>[t(k,{modelValue:o.model.company_id,"onUpdate:modelValue":e[3]||(e[3]=d=>o.model.company_id=d),"item-title":"text","item-value":"value",variant:"outlined",density:"compact",items:o.companylist,onClick:e[4]||(e[4]=d=>i.onCompanyChange()),rules:o.companyrule},null,8,["modelValue","items","rules"])]),_:1}),t(s,{cols:"12",md:"4"},{default:a(()=>e[13]||(e[13]=[u("label",{class:"font-weight-regular"},[r("Department"),u("span",{class:"text-red"},"*")],-1)])),_:1}),t(s,{cols:"12",md:"5"},{default:a(()=>[t(k,{modelValue:o.model.department_id,"onUpdate:modelValue":e[5]||(e[5]=d=>o.model.department_id=d),"item-title":"text","item-value":"value",variant:"outlined",density:"compact",items:o.departmentlist,rules:o.departmentrule},null,8,["modelValue","items","rules"])]),_:1}),t(s,{cols:"12",md:"9"},{default:a(()=>[t(R,{class:"text-right"},{default:a(()=>[t(S),t(f,{type:"submit",size:"small",variant:"outlined",color:"primary"},{default:a(()=>e[14]||(e[14]=[r("Save")])),_:1}),t(f,{dark:"",size:"small",variant:"outlined",color:"warning",onClick:e[6]||(e[6]=g(d=>i.ClearCancel(),["stop"]))},{default:a(()=>e[15]||(e[15]=[r("Clear")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit","modelValue"])]),_:1})]),_:1},8,["modelValue"])}const W=x(J,[["render",Q],["__scopeId","data-v-e4fa7611"]]),X={components:{Entry:W,DataTableHelper:j},data(){return{excelloading:!1,loading:!0,selected:[],model:new D,headers:[{title:"Action",width:140,key:"id"},{title:"Account_No",key:"account_no",width:220},{title:"Description",key:"description",width:220},{title:"Department",key:"department_name",width:220},{title:"Company",key:"company_name",width:220}]}},computed:{getTableHeaders(){let l=[];return this.showActionButtons===!1&&l.push("actions"),this.headers.filter(e=>!l.includes(e.value))},getSel(){return this.selected.length}},methods:{GetAllData(l){return this.model.status=-1,v.GetAll(l,this.model)},loadItems({page:l,itemsPerPage:e,sortBy:n}){this.loading=!0,FakeAPI.fetch({page:l,itemsPerPage:e,sortBy:n}).then(({items:m,total:o})=>{this.serverItems=m,this.totalItems=o,this.loading=!1})},ResetFilter(){this.model=new D,this.model.status=-1,this.$refs.DataTable.Reload(!0)},ShowLoading(l){this.$refs.DataTable.loading=l},NewItem(){this.$refs.EntryModal.Show("new")},EditItem(l){var e=this;e.ShowLoading(!0),v.GetById(l.id).then(n=>{window.console.log(n.data),e.$refs.EntryModal.model=n.data,e.$refs.EntryModal.disabled=!0,e.ShowLoading(!1),e.$refs.EntryModal.Show("edit")})},DeleteItem(l){var e=this;cbt.$root.ConfirmBoxModal.open().then(n=>{n&&(e.ShowLoading(!0),v.Delete(l.id).then(m=>{if(m.data){var o=m.data.messages[0];m.data.success?(e.$root.AlertDialog.Show({message:o,color:"success"}),e.ResetFilter()):e.$root.AlertDialog.Show({message:o,color:"error"})}},m=>{console.error(m),ct.ShowLoading(!1)}))})},Filter(){this.$refs.DataTable.Reload(!0)}}};function Y(l,e,n,m,o,i){const d=A("DataTableHelper"),U=A("Entry");return E(),I(P,null,{default:a(()=>[t(h,{dense:""},{default:a(()=>[t(s,{cols:"12",md:"12"},{default:a(()=>[t(_,null,{title:a(()=>e[2]||(e[2]=[r(" Account List ")])),default:a(()=>[t(s,null,{default:a(()=>[t(T,{density:"compact",color:"white",class:"mb-2"},{default:a(()=>[t(s,{cols:"12",md:"2"},{default:a(()=>[t(V,{location:"bottom"},{activator:a(({props:c})=>[t(f,H({size:"small",variant:"outlined",color:"#000080",onClick:i.NewItem},c),{default:a(()=>e[3]||(e[3]=[r(" New")])),_:2},1040,["onClick"])]),default:a(()=>[e[4]||(e[4]=u("span",{class:"text-center"},"Entry",-1))]),_:1})]),_:1}),t(s,{cols:"12",md:"4"}),t(s,{cols:"12",md:"5"},{default:a(()=>[t(O,null,{default:a(()=>[t(C,{elevation:0,density:"compact",modelValue:o.model.name,"onUpdate:modelValue":e[0]||(e[0]=c=>o.model.name=c),variant:"solo",label:"Search","single-line":"","hide-details":"",clearable:"","onClick:clear":i.ResetFilter,onKeyup:K(i.Filter,["enter"])},null,8,["modelValue","onClick:clear","onKeyup"])]),_:1})]),_:1})]),_:1}),t(d,{ref:"DataTable",headers:o.headers,dataLoader:i.GetAllData,show_select:!1,modelValue:o.selected,"onUpdate:modelValue":e[1]||(e[1]=c=>o.selected=c)},{"item.id":a(({item:c})=>[t(f,{variant:"text",icon:"",size:"x-small",onClick:F=>i.EditItem(c),color:"warning"},{default:a(()=>[t(w,null,{default:a(()=>e[5]||(e[5]=[r("mdi-pencil")])),_:1}),t(V,{activator:"parent",location:"bottom"},{default:a(()=>e[6]||(e[6]=[r("Edit")])),_:1})]),_:2},1032,["onClick"]),t(f,{variant:"text",icon:"",size:"small",onClick:F=>i.DeleteItem(c),color:"red"},{default:a(()=>[t(w,null,{default:a(()=>e[7]||(e[7]=[r("mdi-delete-outline")])),_:1}),t(V,{activator:"parent",location:"bottom"},{default:a(()=>e[8]||(e[8]=[r("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["headers","dataLoader","modelValue"]),t(U,{onAfterSaved:i.ResetFilter,ref:"EntryModal"},null,8,["onAfterSaved"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ae=x(X,[["render",Y]]);export{ae as default};
