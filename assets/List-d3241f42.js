import{c,_ as D,f as k,G as A,k as t,j as l,H as T,I,u as r,E as N,B as _,q as p,C as w,s as V,D as U,x as h,V as s,l as C,p as f,z as g,A as B,J as F,e as b,ay as L,af as y,ad as M,ak as O,b2 as R}from"./index-26f63e57.js";import{A as S}from"./company-96ffbb87.js";import{D as G}from"./DataTableHelper-234fa2d4.js";import"./VCheckboxBtn-5a600a8b.js";class ${SaveOrUpdate(e){return c.$http.post("/Company/SaveOrUpdate",e)}GetAll(e,n){let m={params:{...e,...n}};return c.$http.get("Company/GetAll",m)}GetById(e){return c.$http.get("/Company/GetById?id="+e)}Delete(e){return c.$http.delete("Company/Delete?id="+e)}}const v=new $;const z={data(){return{dialog:!1,formname:"",model:new S,inline:null,redisabled:!0,namerule:[a=>!!a||"Please Fill Name !"],coderule:[a=>!!a||"Please Fill Code !"],botlicensenorule:[a=>!!a||"Please Fill BOT License No !"]}},methods:{Show(a){this.dialog=!0,a=="new"?this.formname="Company Entry":this.formname="Edit Company Entry"},ValidateModel(){return this.$refs.form.validate()},SaveOrUpdate(){var a=this;a.ValidateModel(),a.valid==!0&&v.SaveOrUpdate(a.model).then(e=>{if(e.data){var n=e.data.messages[0];e.data.success?(a.$root.AlertDialog.Show({message:n,color:"success"}),a.$emit("AfterSaved"),a.ClearData()):a.$root.AlertDialog.Show({message:n,color:"error"})}})},ClearData(){this.model.code="",this.model.name="",this.model.bot_license_no="",this.dialog=!1},ClearCancel(){this.model.code="",this.model.name="",this.model.bot_license_no="",this.transaction_daterule=!1}},watch:{},created(){},computed:{getUserInfo(){return JSON.parse(localStorage.getItem("user"))}}};function P(a,e,n,m,o,i){return k(),A(F,{persistent:"",modelValue:o.dialog,"onUpdate:modelValue":e[6]||(e[6]=d=>o.dialog=d),width:"50%"},{default:t(()=>[l(h,null,{default:t(()=>[l(T,{dark:"",color:"rgb(0 208 250)"},{default:t(()=>[l(I,{dark:""},{default:t(()=>[r(N(o.formname),1)]),_:1}),l(_),l(p,{onClick:e[0]||(e[0]=w(d=>i.ClearData(),["stop"])),icon:""},{default:t(()=>[l(V,null,{default:t(()=>e[7]||(e[7]=[r("mdi-close")])),_:1})]),_:1})]),_:1}),l(U,{onSubmit:w(i.SaveOrUpdate,["prevent"]),autocomplete:"off",ref:"form",modelValue:a.valid,"onUpdate:modelValue":e[5]||(e[5]=d=>a.valid=d)},{default:t(()=>[l(h,{flat:""},{default:t(()=>[l(s,{cols:"12",md:"12",class:"mt-8"},{default:t(()=>[l(C,{dense:""},{default:t(()=>[l(s,{cols:"12",md:"12"},{default:t(()=>[l(C,{dense:""},{default:t(()=>[l(s,{cols:"12",md:"4"},{default:t(()=>e[8]||(e[8]=[f("label",{class:"font-weight-regular"},[r("Code"),f("span",{class:"text-red"},"*")],-1)])),_:1}),l(s,{cols:"12",md:"5"},{default:t(()=>[l(g,{modelValue:o.model.code,"onUpdate:modelValue":e[1]||(e[1]=d=>o.model.code=d),variant:"outlined",density:"compact",rules:o.coderule},null,8,["modelValue","rules"])]),_:1}),l(s,{cols:"12",md:"4"},{default:t(()=>e[9]||(e[9]=[f("label",{class:"font-weight-regular"},[r("Company Name"),f("span",{class:"text-red"},"*")],-1)])),_:1}),l(s,{cols:"12",md:"5"},{default:t(()=>[l(g,{modelValue:o.model.name,"onUpdate:modelValue":e[2]||(e[2]=d=>o.model.name=d),variant:"outlined",density:"compact",rules:o.namerule},null,8,["modelValue","rules"])]),_:1}),l(s,{cols:"12",md:"4"},{default:t(()=>e[10]||(e[10]=[f("label",{class:"font-weight-regular"},[r("BOT License No"),f("span",{class:"text-red"},"*")],-1)])),_:1}),l(s,{cols:"12",md:"5"},{default:t(()=>[l(g,{modelValue:o.model.bot_license_no,"onUpdate:modelValue":e[3]||(e[3]=d=>o.model.bot_license_no=d),variant:"outlined",density:"compact",rules:o.botlicensenorule},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(s,{cols:"12",md:"9"},{default:t(()=>[l(B,{class:"text-right"},{default:t(()=>[l(_),l(p,{type:"submit",size:"small",variant:"outlined",color:"primary"},{default:t(()=>e[11]||(e[11]=[r("Save")])),_:1}),l(p,{dark:"",size:"small",variant:"outlined",color:"warning",onClick:e[4]||(e[4]=w(d=>i.ClearCancel(),["stop"]))},{default:t(()=>e[12]||(e[12]=[r("Clear")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit","modelValue"])]),_:1})]),_:1},8,["modelValue"])}const H=D(z,[["render",P],["__scopeId","data-v-529f36fe"]]),J={components:{DataTableHelper:G,Entry:H},data(){return{excelloading:!1,loading:!0,model:new S,selected:[],headers:[{title:"Actions",width:140,key:"id"},{title:"Code",key:"code",width:220},{title:"Company Name",key:"name",width:220},{title:"BOT License No",key:"bot_license_no",width:220}]}},computed:{getUserInfo(){return JSON.parse(localStorage.getItem("user"))},getTableHeaders(){let a=[];return this.showActionButtons===!1&&a.push("actions"),this.headers.filter(e=>!a.includes(e.value))},getSel(){return this.selected.length}},methods:{GetAllData(a){return this.model.status=-1,v.GetAll(a,this.model)},Filter(){this.$refs.DataTable.Reload(!0)},AdvancedFilter(){this.$refs.SearchModal.Show(this.model)},AfterAdvancedFilter(a){this.model=a,this.$refs.DataTable.Reload(!0)},ResetFilter(){this.model=new S,this.model.status=-1,this.$refs.DataTable.Reload(!0)},ShowLoading(a){this.$refs.DataTable.loading=a},NewItem(){this.$refs.EntryModal.Show("new")},EditItem(a){var e=this;e.ShowLoading(!0),v.GetById(a.id).then(n=>{window.console.log(n.data),e.$refs.EntryModal.model=n.data,e.$refs.EntryModal.disabled=!0,e.ShowLoading(!1),e.$refs.EntryModal.Show("edit")})},DeleteItem(a){var e=this;e.$root.ConfirmBoxModal.open().then(n=>{n&&(e.ShowLoading(!0),v.Delete(a.id).then(m=>{if(m.data){var o=m.data.messages[0];m.data.success?(e.$root.AlertDialog.Show({message:o,color:"success"}),e.ResetFilter()):e.$root.AlertDialog.Show({message:o,color:"error"})}},m=>{console.error(m),e.ShowLoading(!1)}))})},ShowPasswordReset(a){this.$refs.PasswordResetModal.Show(a)}}};function K(a,e,n,m,o,i){const d=b("DataTableHelper"),x=b("Entry");return k(),A(L,null,{default:t(()=>[l(C,{dense:""},{default:t(()=>[l(s,{cols:"12",md:"12"},{default:t(()=>[l(h,null,{title:t(()=>e[2]||(e[2]=[r(" Company ")])),default:t(()=>[l(s,null,{default:t(()=>[l(T,{density:"compact",color:"white",class:"mb-2"},{default:t(()=>[l(s,{cols:"12",md:"2"},{default:t(()=>[l(y,{location:"bottom"},{activator:t(({props:u})=>[l(p,M({size:"small",variant:"outlined",color:"#000080",onClick:i.NewItem},u),{default:t(()=>e[3]||(e[3]=[r(" New")])),_:2},1040,["onClick"])]),default:t(()=>[e[4]||(e[4]=f("span",{class:"text-center"},"Entry",-1))]),_:1})]),_:1}),l(s,{cols:"12",md:"4"}),l(s,{cols:"12",md:"5"},{default:t(()=>[l(O,null,{default:t(()=>[l(g,{elevation:0,density:"compact",modelValue:o.model.name,"onUpdate:modelValue":e[0]||(e[0]=u=>o.model.name=u),variant:"solo",label:"Search","single-line":"","hide-details":"",clearable:"","onClick:clear":i.ResetFilter,onKeyup:R(i.Filter,["enter"])},null,8,["modelValue","onClick:clear","onKeyup"])]),_:1})]),_:1})]),_:1}),l(d,{ref:"DataTable",headers:o.headers,dataLoader:i.GetAllData,show_select:!1,modelValue:o.selected,"onUpdate:modelValue":e[1]||(e[1]=u=>o.selected=u)},{"item.id":t(({item:u})=>[l(p,{variant:"text",icon:"",size:"x-small",onClick:E=>i.EditItem(u),color:"warning"},{default:t(()=>[l(V,null,{default:t(()=>e[5]||(e[5]=[r("mdi-pencil")])),_:1}),l(y,{activator:"parent",location:"bottom"},{default:t(()=>e[6]||(e[6]=[r("Edit")])),_:1})]),_:2},1032,["onClick"]),l(p,{variant:"text",icon:"",size:"small",onClick:E=>i.DeleteItem(u),color:"red"},{default:t(()=>[l(V,null,{default:t(()=>e[7]||(e[7]=[r("mdi-delete-outline")])),_:1}),l(y,{activator:"parent",location:"bottom"},{default:t(()=>e[8]||(e[8]=[r("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["headers","dataLoader","modelValue"]),l(x,{onAfterSaved:i.ResetFilter,ref:"EntryModal"},null,8,["onAfterSaved"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const X=D(J,[["render",K]]);export{X as default};
