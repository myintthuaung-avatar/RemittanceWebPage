import{_ as D,a$ as b,b0 as v,f as P,G as k,k as t,j as l,H as R,I as U,u as r,E as A,B as S,q as w,C as g,s as V,D as I,V as a,l as m,p as n,z as y,m as N,v as F,A as M,x as T,J as L,e as x,ay as B,af as c,ad as O,ak as G,b2 as z}from"./index-26f63e57.js";import{D as H}from"./DataTableHelper-234fa2d4.js";import{D as C,V as _}from"./VAutocomplete-50ca3122.js";import"./VCheckboxBtn-5a600a8b.js";const j={data(){return{dialog:!1,formname:"",model:new b,showPassText:!1,showPassInputBox:!0,rolelist:[],companylist:[],departmentlist:[],adminrolelist:["ADMINISTRATOR","APPROVER","CHECKER","OPREATOR","USER"],inline:null,redisabled:!0,namerule:[o=>!!o||"Please Fill Name !"],usernamerule:[o=>!!o||"Please Fill User Name !"],rolerule:[o=>!!o||"Please select Role !"],employeecoderule:[o=>!!o||"Please Fill Employee Code !"],departmentrule:[o=>!!o||"Please Select Department !"],companyrule:[o=>!!o||"Please Select Company !"],passwordRules:[o=>!!o||"Please Fill Password !",o=>o&&o.length>=6||"Password at least 6 characters !"],confirm_passwordRules:[o=>!!o||"Need to fill Confirm_Password !",o=>o&&o===this.model.password||"Password and Confirm_Password must be same !"]}},methods:{Show(o){this.dialog=!0,o=="new"?this.formname="User Entry":this.formname="Edit User Entry"},ValidateModel(){return this.$refs.form.validate()},SaveOrUpdate(){var o=this;o.ValidateModel(),o.valid==!0&&v.SaveOrUpdate(o.model).then(e=>{if(e.data){var u=e.data.messages[0];e.data.success?(o.$root.AlertDialog.Show({message:u,color:"success"}),o.$emit("AfterSaved"),o.ClearData()):o.$root.AlertDialog.Show({message:u,color:"error"})}})},ClearData(){this.model.employee_code="",this.model.name="",this.model.username="",this.model.password="",this.model.confirm_password="",this.model.role="",this.model.company_id=null,this.model.department_id=null,this.dialog=!1},ClearCancel(){this.model.employee_code="",this.model.name="",this.model.username="",this.model.password="",this.model.confirm_password="",this.model.role="",this.model.company_id=null,this.model.department_id=null,this.transaction_daterule=!1}},watch:{"model.company_id"(o){o>0&&C.GetDepartmentList(o).then(e=>{this.departmentlist=e.data})}},created(){C.GetRoleList().then(o=>{this.rolelist=o.data}),C.GetCompanyList().then(o=>{this.companylist=o.data})},computed:{getUserInfo(){return JSON.parse(localStorage.getItem("user"))}}};function K(o,e,u,p,s,i){return P(),k(L,{persistent:"",modelValue:s.dialog,"onUpdate:modelValue":e[13]||(e[13]=d=>s.dialog=d),width:"100%"},{default:t(()=>[l(T,null,{default:t(()=>[l(R,{color:"rgb(0 208 250)",flat:""},{default:t(()=>[l(U,{dark:""},{default:t(()=>[r(A(s.formname),1)]),_:1}),l(S),l(w,{onClick:e[0]||(e[0]=g(d=>i.ClearData(),["stop"])),icon:""},{default:t(()=>[l(V,null,{default:t(()=>e[14]||(e[14]=[r("mdi-close")])),_:1})]),_:1})]),_:1}),l(I,{onSubmit:g(i.SaveOrUpdate,["prevent"]),autocomplete:"off",ref:"form",modelValue:o.valid,"onUpdate:modelValue":e[12]||(e[12]=d=>o.valid=d)},{default:t(()=>[l(a,{cols:"12",md:"12"},{default:t(()=>[l(m,null,{default:t(()=>[l(a,{cols:"12",md:"12",class:"mt-3"},{default:t(()=>[l(m,{dense:"",justify:"center"},{default:t(()=>[l(a,{cols:"12",md:"6"},{default:t(()=>[l(m,{dense:"",justify:"center"},{default:t(()=>[l(a,{cols:"12",md:"5"},{default:t(()=>e[15]||(e[15]=[n("label",{class:"font-weight-regular"},[r("Employee code"),n("span",{class:"text-red"},"*")],-1)])),_:1}),l(a,{cols:"12",md:"7"},{default:t(()=>[l(y,{modelValue:s.model.employee_code,"onUpdate:modelValue":e[1]||(e[1]=d=>s.model.employee_code=d),variant:"outlined",density:"compact",rules:s.employeecoderule},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(m,{dense:"",justify:"center"},{default:t(()=>[l(a,{cols:"12",md:"5"},{default:t(()=>e[16]||(e[16]=[n("label",{class:"font-weight-regular"},[r("User Name"),n("span",{class:"text-red"},"*")],-1)])),_:1}),l(a,{cols:"12",md:"7"},{default:t(()=>[l(y,{modelValue:s.model.username,"onUpdate:modelValue":e[2]||(e[2]=d=>s.model.username=d),variant:"outlined",density:"compact",rules:s.usernamerule},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(m,{dense:""},{default:t(()=>[l(a,{cols:"12",md:"5"},{default:t(()=>e[17]||(e[17]=[n("label",{class:"font-weight-regular"},[r("Name"),n("span",{class:"text-red"},"*")],-1)])),_:1}),l(a,{cols:"12",md:"7"},{default:t(()=>[l(y,{modelValue:s.model.name,"onUpdate:modelValue":e[3]||(e[3]=d=>s.model.name=d),variant:"outlined",density:"compact",rules:s.namerule},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(m,{dense:""},{default:t(()=>[l(a,{cols:"12",md:"5"},{default:t(()=>e[18]||(e[18]=[n("label",{class:"font-weight-regular"},[r("Role"),n("span",{class:"text-red"},"*")],-1)])),_:1}),l(a,{cols:"12",md:"7"},{default:t(()=>[l(_,{modelValue:s.model.role,"onUpdate:modelValue":e[4]||(e[4]=d=>s.model.role=d),"item-title":"text","item-value":"text",variant:"outlined",density:"compact",items:s.rolelist,rules:s.rolerule},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),l(a,{cols:"12",md:"6"},{default:t(()=>[l(m,{dense:""},{default:t(()=>[l(a,{cols:"12",md:"5"},{default:t(()=>e[19]||(e[19]=[n("label",{class:"lab"},[r("Password"),n("span",{class:"text-red"},"*")],-1)])),_:1}),l(a,{cols:"12",md:"7"},{default:t(()=>[l(y,{modelValue:s.model.password,"onUpdate:modelValue":e[5]||(e[5]=d=>s.model.password=d),required:"",disabled:o.disabled,rules:s.passwordRules,type:s.showPassText?"text":"password","append-icon":s.showPassText?"mdi-eye":"mdi-eye-off","onClick:append":e[6]||(e[6]=d=>s.showPassText=!s.showPassText),autocomplete:"off",variant:"outlined",density:"compact",dense:""},null,8,["modelValue","disabled","rules","type","append-icon"])]),_:1})]),_:1}),l(m,{dense:""},{default:t(()=>[l(a,{cols:"12",md:"5"},{default:t(()=>e[20]||(e[20]=[n("label",{class:"lab"},[r("Confirm_Password"),n("span",{class:"text-red"},"*")],-1)])),_:1}),N(l(a,{cols:"12",md:"7"},{default:t(()=>[l(y,{modelValue:s.model.confirm_password,"onUpdate:modelValue":e[7]||(e[7]=d=>s.model.confirm_password=d),required:"",disabled:o.disabled,rules:s.confirm_passwordRules,type:s.showPassText?"text":"password","append-icon":s.showPassText?"mdi-eye":"mdi-eye-off","onClick:append":e[8]||(e[8]=d=>s.showPassText=!s.showPassText),autocomplete:"off",variant:"outlined",density:"compact",dense:""},null,8,["modelValue","disabled","rules","type","append-icon"])]),_:1},512),[[F,s.showPassInputBox]])]),_:1}),l(m,{dense:""},{default:t(()=>[l(a,{cols:"12",md:"5"},{default:t(()=>e[21]||(e[21]=[n("label",{class:"font-weight-regular"},[r("Company"),n("span",{class:"text-red"},"*")],-1)])),_:1}),l(a,{cols:"12",md:"7"},{default:t(()=>[l(_,{modelValue:s.model.company_id,"onUpdate:modelValue":e[9]||(e[9]=d=>s.model.company_id=d),"item-title":"text","item-value":"value",variant:"outlined",density:"compact",items:s.companylist,rules:s.companyrule},null,8,["modelValue","items","rules"])]),_:1})]),_:1}),l(m,{dense:""},{default:t(()=>[l(a,{cols:"12",md:"5"},{default:t(()=>e[22]||(e[22]=[n("label",{class:"font-weight-regular"},[r("Department"),n("span",{class:"text-red"},"*")],-1)])),_:1}),l(a,{cols:"12",md:"7"},{default:t(()=>[l(_,{modelValue:s.model.department_id,"onUpdate:modelValue":e[10]||(e[10]=d=>s.model.department_id=d),"item-title":"text","item-value":"value",variant:"outlined",density:"compact",items:s.departmentlist,rules:s.departmentrule},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),l(a,{cols:"12",md:"12"},{default:t(()=>[l(M,{class:"text-right"},{default:t(()=>[l(S),l(w,{type:"submit",size:"small",variant:"outlined",color:"primary"},{default:t(()=>e[23]||(e[23]=[r("Save")])),_:1}),l(w,{dark:"",size:"small",variant:"outlined",color:"warning",onClick:e[11]||(e[11]=g(d=>i.ClearCancel(),["stop"]))},{default:t(()=>e[24]||(e[24]=[r("Clear")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit","modelValue"])]),_:1})]),_:1},8,["modelValue"])}const q=D(j,[["render",K],["__scopeId","data-v-af111105"]]),J={components:{DataTableHelper:H,Entry:q},data(){return{excelloading:!1,loading:!0,model:new b,selected:[],headers:[{title:"Actions",width:140,key:"id"},{title:"Employee Code",key:"employee_code"},{title:"Name",key:"name"},{title:"User Name",key:"username"},{title:"Role",key:"role"},{title:"Department",key:"department_name"},{title:"Company",key:"company_name"}]}},computed:{getUserInfo(){return JSON.parse(localStorage.getItem("user"))},getTableHeaders(){let o=[];return this.showActionButtons===!1&&o.push("actions"),this.headers.filter(e=>!o.includes(e.value))},getSel(){return this.selected.length}},methods:{GetAllData(o){return this.model.status=-1,v.GetAll(o,this.model)},Filter(){this.$refs.DataTable.Reload(!0)},AdvancedFilter(){this.$refs.SearchModal.Show(this.model)},AfterAdvancedFilter(o){this.model=o,this.$refs.DataTable.Reload(!0)},ResetFilter(){this.model=new b,this.$refs.DataTable.Reload(!0)},ShowLoading(o){this.$refs.DataTable.loading=o},NewItem(){this.$refs.EntryModal.Show("new")},EditItem(o){var e=this;e.ShowLoading(!0),v.GetById(o.id).then(u=>{window.console.log(u.data),e.$refs.EntryModal.model=u.data,e.$refs.EntryModal.disabled=!0,e.ShowLoading(!1),e.$refs.EntryModal.Show("edit")})},DeleteItem(o){var e=this;e.$root.ConfirmBoxModal.open().then(u=>{u&&(e.ShowLoading(!0),v.Delete(o.id).then(p=>{if(p.data){var s=p.data.messages[0];p.data.success?(e.$root.AlertDialog.Show({message:s,color:"success"}),e.ResetFilter()):e.$root.AlertDialog.Show({message:s,color:"error"})}},p=>{console.error(p),e.ShowLoading(!1)}))})},ShowPasswordReset(o){this.$refs.PasswordResetModal.Show(o)}}};function Q(o,e,u,p,s,i){const d=x("DataTableHelper"),E=x("Entry");return P(),k(B,null,{default:t(()=>[l(m,{dense:""},{default:t(()=>[l(a,{cols:"12",md:"12"},{default:t(()=>[l(T,null,{title:t(()=>e[2]||(e[2]=[r(" User Accounts ")])),default:t(()=>[l(a,null,{default:t(()=>[l(R,{density:"compact",color:"white",class:"mb-2"},{default:t(()=>[l(a,{cols:"12",md:"2"},{default:t(()=>[l(c,{location:"bottom"},{activator:t(({props:f})=>[l(w,O({size:"small",variant:"outlined",color:"#000080",onClick:i.NewItem},f),{default:t(()=>e[3]||(e[3]=[r(" New")])),_:2},1040,["onClick"])]),default:t(()=>[e[4]||(e[4]=n("span",{class:"text-center"},"Entry",-1))]),_:1})]),_:1}),l(a,{cols:"12",md:"4"}),l(a,{cols:"12",md:"5"},{default:t(()=>[l(G,null,{default:t(()=>[l(y,{elevation:0,density:"compact",modelValue:s.model.name,"onUpdate:modelValue":e[0]||(e[0]=f=>s.model.name=f),variant:"solo",label:"Search","single-line":"","hide-details":"","onClick:clear":i.ResetFilter,onKeyup:z(i.Filter,["enter"])},null,8,["modelValue","onClick:clear","onKeyup"])]),_:1})]),_:1})]),_:1}),l(d,{ref:"DataTable",headers:s.headers,dataLoader:i.GetAllData,show_select:!1,modelValue:s.selected,"onUpdate:modelValue":e[1]||(e[1]=f=>s.selected=f)},{"item.id":t(({item:f})=>[l(w,{variant:"text",icon:"",size:"x-small",onClick:h=>i.EditItem(f),color:"warning"},{default:t(()=>[l(V,null,{default:t(()=>e[5]||(e[5]=[r("mdi-pencil")])),_:1}),l(c,{activator:"parent",location:"bottom"},{default:t(()=>e[6]||(e[6]=[r("Edit")])),_:1})]),_:2},1032,["onClick"]),l(w,{variant:"text",icon:"",size:"small",onClick:h=>i.DeleteItem(f),color:"red"},{default:t(()=>[l(V,null,{default:t(()=>e[7]||(e[7]=[r("mdi-delete-outline")])),_:1}),l(c,{activator:"parent",location:"bottom"},{default:t(()=>e[8]||(e[8]=[r("Delete")])),_:1})]),_:2},1032,["onClick"]),l(w,{variant:"text",icon:"",size:"x-small",onClick:h=>i.ShowPasswordReset(f),color:"secondary"},{default:t(()=>[l(V,null,{default:t(()=>e[9]||(e[9]=[r("mdi-lock-reset")])),_:1}),l(c,{activator:"parent",location:"bottom"},{default:t(()=>e[10]||(e[10]=[r("Reset Password")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["headers","dataLoader","modelValue"]),l(E,{onAfterSaved:i.ResetFilter,ref:"EntryModal"},null,8,["onAfterSaved"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const $=D(J,[["render",Q]]);export{$ as default};
