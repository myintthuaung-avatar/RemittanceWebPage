var N=Object.defineProperty;var U=(l,e,r)=>e in l?N(l,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[e]=r;var c=(l,e,r)=>(U(l,typeof e!="symbol"?e+"":e,r),r);import{c as v,_ as b,f as k,G as A,k as a,j as t,H as x,I as F,u as d,E as B,B as _,q as f,C as y,s as h,D as G,x as w,V as s,l as D,p,z as E,A as M,J as $,e as C,ay as L,af as V,ad as R,ak as z,b2 as O}from"./index-26f63e57.js";import{D as H}from"./DataTableHelper-234fa2d4.js";import{D as K,V as P}from"./VAutocomplete-50ca3122.js";import"./VCheckboxBtn-5a600a8b.js";class J{SaveOrUpdate(e){return v.$http.post("/Department/SaveOrUpdate",e)}GetAll(e,r){let m={params:{...e,...r}};return v.$http.get("/Department/GetAll",m)}GetById(e){return v.$http.get("/Department/GetById?id="+e)}Delete(e){return v.$http.delete("/Department/Delete?id="+e)}}const g=new J;class S{constructor(){c(this,"id",0);c(this,"name","");c(this,"company_id",null)}}const j={data(){return{dialog:!1,formname:"",model:new S,inline:null,redisabled:!0,namerule:[l=>!!l||"Please Fill Name !"],companyrule:[l=>!!l||"Please Select Company !"]}},methods:{Show(l){this.dialog=!0,l=="edit"?this.formname="Edit Department Entry":this.formname="Department Entry"},ValidateModel(){return this.$refs.form.validate()},SaveOrUpdate(){var l=this;l.ValidateModel(),l.valid==!0&&g.SaveOrUpdate(l.model).then(e=>{if(e.data){var r=e.data.messages[0];e.data.success?(l.$root.AlertDialog.Show({message:r,color:"success"}),l.$emit("AfterSaved"),l.ClearData()):l.$root.AlertDialog.Show({message:r,color:"error"})}})},ClearData(){this.model.name="",this.model.company_id=null,this.dialog=!1},ClearCancel(){this.model.name="",this.model.company_id=null,this.transaction_daterule=!1}},watch:{},created(){K.GetCompanyList().then(l=>{this.companylist=l.data})},computed:{}};function q(l,e,r,m,o,n){return k(),A($,{persistent:"",modelValue:o.dialog,"onUpdate:modelValue":e[5]||(e[5]=i=>o.dialog=i),width:"50%"},{default:a(()=>[t(w,null,{default:a(()=>[t(x,{dark:"",color:"rgb(0 208 250)"},{default:a(()=>[t(F,{dark:""},{default:a(()=>[d(B(o.formname),1)]),_:1}),t(_),t(f,{onClick:e[0]||(e[0]=y(i=>n.ClearData(),["stop"])),icon:""},{default:a(()=>[t(h,null,{default:a(()=>e[6]||(e[6]=[d("mdi-close")])),_:1})]),_:1})]),_:1}),t(G,{onSubmit:y(n.SaveOrUpdate,["prevent"]),autocomplete:"off",ref:"form",modelValue:l.valid,"onUpdate:modelValue":e[4]||(e[4]=i=>l.valid=i)},{default:a(()=>[t(w,{flat:""},{default:a(()=>[t(s,{cols:"12",md:"12",class:"mt-8"},{default:a(()=>[t(D,{dense:""},{default:a(()=>[t(s,{cols:"12",md:"12"},{default:a(()=>[t(D,{dense:""},{default:a(()=>[t(s,{cols:"12",md:"4"},{default:a(()=>e[7]||(e[7]=[p("label",{class:"font-weight-regular"},[d("Name"),p("span",{class:"text-red"},"*")],-1)])),_:1}),t(s,{cols:"12",md:"5"},{default:a(()=>[t(E,{modelValue:o.model.name,"onUpdate:modelValue":e[1]||(e[1]=i=>o.model.name=i),variant:"outlined",density:"compact",rules:o.namerule},null,8,["modelValue","rules"])]),_:1}),t(s,{cols:"12",md:"4"},{default:a(()=>e[8]||(e[8]=[p("label",{class:"font-weight-regular"},[d("Company Name"),p("span",{class:"text-red"},"*")],-1)])),_:1}),t(s,{cols:"12",md:"5"},{default:a(()=>[t(P,{clearable:"",modelValue:o.model.company_id,"onUpdate:modelValue":e[2]||(e[2]=i=>o.model.company_id=i),"item-title":"text","item-value":"value",variant:"outlined",density:"compact",items:l.companylist,rules:o.companyrule},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(s,{cols:"12",md:"9"},{default:a(()=>[t(M,{class:"text-right"},{default:a(()=>[t(_),t(f,{type:"submit",size:"small",variant:"outlined",color:"primary"},{default:a(()=>e[9]||(e[9]=[d("Save")])),_:1}),t(f,{dark:"",size:"small",variant:"outlined",color:"warning",onClick:e[3]||(e[3]=y(i=>n.ClearCancel(),["stop"]))},{default:a(()=>e[10]||(e[10]=[d("Clear")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit","modelValue"])]),_:1})]),_:1},8,["modelValue"])}const Q=b(j,[["render",q],["__scopeId","data-v-2e292715"]]),W={components:{DataTableHelper:H,Entry:Q},data(){return{excelloading:!1,loading:!0,model:new S,selected:[],headers:[{title:"Actions",width:140,key:"id"},{title:"Name",key:"name",width:220},{title:"Company Name",key:"company_name",width:220}]}},computed:{getUserInfo(){return JSON.parse(localStorage.getItem("user"))},getTableHeaders(){let l=[];return this.showActionButtons===!1&&l.push("actions"),this.headers.filter(e=>!l.includes(e.value))},getSel(){return this.selected.length}},methods:{GetAllData(l){return this.model.status=-1,g.GetAll(l,this.model)},Filter(){this.$refs.DataTable.Reload(!0)},AdvancedFilter(){this.$refs.SearchModal.Show(this.model)},AfterAdvancedFilter(l){this.model=l,this.$refs.DataTable.Reload(!0)},ResetFilter(){this.model=new S,this.model.status=-1,this.$refs.DataTable.Reload(!0)},ShowLoading(l){this.$refs.DataTable.loading=l},NewItem(){this.$refs.EntryModal.Show("new")},EditItem(l){var e=this;e.ShowLoading(!0),g.GetById(l.id).then(r=>{window.console.log(r.data),e.$refs.EntryModal.model=r.data,e.$refs.EntryModal.disabled=!0,e.ShowLoading(!1),e.$refs.EntryModal.Show("edit")})},DeleteItem(l){var e=this;e.$root.ConfirmBoxModal.open().then(r=>{r&&(e.ShowLoading(!0),g.Delete(l.id).then(m=>{if(m.data){var o=m.data.messages[0];m.data.success?(e.$root.AlertDialog.Show({message:o,color:"success"}),e.ResetFilter()):e.$root.AlertDialog.Show({message:o,color:"error"})}},m=>{console.error(m),e.ShowLoading(!1)}))})}}};function X(l,e,r,m,o,n){const i=C("DataTableHelper"),T=C("Entry");return k(),A(L,null,{default:a(()=>[t(D,{dense:""},{default:a(()=>[t(s,{cols:"12",md:"12"},{default:a(()=>[t(w,null,{title:a(()=>e[2]||(e[2]=[d(" Department ")])),default:a(()=>[t(s,null,{default:a(()=>[t(x,{density:"compact",color:"white",class:"mb-2"},{default:a(()=>[t(s,{cols:"12",md:"2"},{default:a(()=>[t(V,{location:"bottom"},{activator:a(({props:u})=>[t(f,R({size:"small",variant:"outlined",color:"#000080",onClick:n.NewItem},u),{default:a(()=>e[3]||(e[3]=[d(" New")])),_:2},1040,["onClick"])]),default:a(()=>[e[4]||(e[4]=p("span",{class:"text-center"},"Entry",-1))]),_:1})]),_:1}),t(s,{cols:"12",md:"4"}),t(s,{cols:"12",md:"5"},{default:a(()=>[t(z,null,{default:a(()=>[t(E,{elevation:0,density:"compact",modelValue:o.model.name,"onUpdate:modelValue":e[0]||(e[0]=u=>o.model.name=u),variant:"solo",label:"Search","single-line":"","hide-details":"",clearable:"","onClick:clear":n.ResetFilter,onKeyup:O(n.Filter,["enter"])},null,8,["modelValue","onClick:clear","onKeyup"])]),_:1})]),_:1})]),_:1}),t(i,{ref:"DataTable",headers:o.headers,dataLoader:n.GetAllData,show_select:!1,modelValue:o.selected,"onUpdate:modelValue":e[1]||(e[1]=u=>o.selected=u)},{"item.id":a(({item:u})=>[t(f,{variant:"text",icon:"",size:"x-small",onClick:I=>n.EditItem(u),color:"warning"},{default:a(()=>[t(h,null,{default:a(()=>e[5]||(e[5]=[d("mdi-pencil")])),_:1}),t(V,{activator:"parent",location:"bottom"},{default:a(()=>e[6]||(e[6]=[d("Edit")])),_:1})]),_:2},1032,["onClick"]),t(f,{variant:"text",icon:"",size:"small",onClick:I=>n.DeleteItem(u),color:"red"},{default:a(()=>[t(h,null,{default:a(()=>e[7]||(e[7]=[d("mdi-delete-outline")])),_:1}),t(V,{activator:"parent",location:"bottom"},{default:a(()=>e[8]||(e[8]=[d("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["headers","dataLoader","modelValue"]),t(T,{onAfterSaved:n.ResetFilter,ref:"EntryModal"},null,8,["onAfterSaved"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ae=b(W,[["render",X]]);export{ae as default};
